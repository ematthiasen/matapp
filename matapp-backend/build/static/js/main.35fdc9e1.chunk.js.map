{"version":3,"sources":["services/fooditem.js","reducers/fooditemReducer.js","reducers/timerReducer.js","reducers/notificationReducer.js","components/FooditemForm.js","reducers/activeRecipeReducer.js","services/recipes.js","reducers/recipeReducer.js","components/RecipeListItem.js","components/RecipeList.js","utils/ingredientCalc.js","components/Ingredient.js","components/IngredientForm.js","components/Recipe.js","components/FooditemList.js","components/Notifications.js","reducers/loggedInUserReducer.js","services/login.js","components/HeaderBar.js","App.js","store.js","index.js"],"names":["baseUrl","token","createFooditem","newFooditem","a","config","headers","Authorization","console","log","axios","post","result","deleteFooditem","id","delete","response","fooditemService","setToken","newToken","getAll","get","updateFooditem","changedFooditem","put","addFooditem","fooditem","dispatch","createdItem","data","type","error","fooditemId","deletedItem","fooditemReducer","state","action","concat","newState","filter","item","setTimeoutHandle","timeoutHandle","timerReducer","window","clearTimeout","createNotification","messageText","messageType","timeout","setNotification","setTimeout","clearNotification","notificationReducer","FooditemForm","fooditemObject","onSuccess","onCancel","useDispatch","handleAddFoodItem","event","preventDefault","target","food","value","foodItem","name","protein","fat","carbohydrate","carb","returnValue","Error","carbs","Card","variant","CardContent","Typography","onSubmit","onReset","Stack","direction","spacing","TextField","label","defaultValue","inputProps","inputMode","pattern","Button","setActiveRecipe","recipe","addIngredientToRecipe","ingredient","Math","floor","random","updateIngredientAmount","ingredientId","newAmount","activeRecipeReducer","newIngredient","ingredientsArray","ingredients","ingredientToUpdate","find","updatedIngredient","amount","newIngredientList","map","newIngredientsArray","recipeService","getRecipe","createRecipe","newRecipe","updateRecipe","changedRecipe","message","deleteRecipe","recipeToDelete","updateIngredientInRecipe","deleteIngredientFromRecipe","updateAllIngredients","ingredientsList","addRecipe","recipeReducer","selectedRecipe","RecipeListItem","handleCloneRecipe","handleShowRecipe","handleDeleteRecipe","useState","visibleDeleteField","setVisibleDeleteField","anchorElConfirmDialog","setAnchorElConfirmDialog","handleCloseDeleteConfirmation","TableRow","sx","border","TableCell","component","scope","title","date","owner","username","align","size","ButtonGroup","onClick","template","IconButton","disabled","color","currentTarget","Popover","open","Boolean","anchorEl","onClose","anchorOrigin","vertical","horizontal","Box","alignContent","p","RecipeList","recipes","useSelector","history","useHistory","push","recipeWithoutId","Date","toLocaleDateString","status","TableContainer","Paper","Table","minWidth","TableHead","TableBody","ingredientCalc","caloriesIn","calcTotalCalOf","reduce","totalCal","calcTotalCarbsOf","totalCarbs","calcTotalFatOf","totalFat","calcTotalProteinOf","totalProtein","Ingredient","updateAmount","setAmount","sliderValue","setSliderValue","sliderMinValue","setSliderMinValue","Number","sliderMaxValue","setSliderMaxValue","Accordion","AccordionSummary","flexGrow","justifyContent","display","amountUnit","AccordionDetails","ml","Slider","marks","min","max","onChange","createFilterOptions","IngredientForm","fooditems","setFooditemObject","fooditemAmount","setFooditemAmount","fooditemUnit","setFooditemUnit","showForm","setShowForm","dialogOpen","setDialogOpen","resetIngredientForm","undefined","createNew","alert","FormControl","fullWidth","Autocomplete","disablePortal","selectOnFocus","clearOnBlur","handleHomeEndKeys","freeSolo","autoSelect","options","getOptionLabel","option","onOpen","obj","existingFooditem","inputValue","renderOption","props","renderInput","params","filterOptions","filtered","isExistingValue","some","Collapse","in","unmountOnExit","py","Select","MenuItem","Dialog","Recipe","activeRecipe","servings","setServings","editTitle","setEditTitle","titleField","setTitleField","useParams","useEffect","savedRecipeJSON","localStorage","getItem","JSON","parse","decodedSave","then","length","Grid","xs","CircularProgress","localSave","saveObject","setItem","stringify","saveToBackend","saveRecipeTitle","updateData","OutlinedInput","style","fontSize","endAdornment","InputAdornment","position","m","startIcon","removeItem","xl","lg","md","sm","gridRow","gridColumn","toFixed","Input","step","maxWidth","FooditemList","fooditemList","handleDelete","returnvalue","container","flexWrap","Notifications","notification","Alert","severity","setLoggedInUser","userdata","loggedInUserReducer","loginUser","loginService","HeaderBar","logout","anchorElementUser","setAnchorElementUser","anchorElementNavigation","setAnchorElementNavigation","anchorElementLogin","setAnchorElementLogin","loggedInUser","setUsername","password","setPassword","setAlert","handleClose","handleCloseLoginMenu","handleCloseNavigationMenu","handleLogin","receivedTokenAndUserdata","handleGuestLogin","AppBar","Toolbar","mr","noWrap","flexgrow","edge","Menu","keepMounted","transformOrigin","textAlign","RouterLink","to","textDecoration","href","my","alignItems","Tooltip","px","controlId","App","savedUserJSON","savedUser","theme","createTheme","palette","primary","light","main","dark","contrastText","secondary","ThemeProvider","path","className","reducer","combineReducers","timer","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.35fdc9e1.chunk.js","sourcesContent":["import axios from 'axios'\r\n//const baseUrl = 'http://localhost:3003/api/fooditems'\r\nconst baseUrl = '/api/fooditems'\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n  token = `bearer ${newToken}`\r\n  console.log('token set:', token)\r\n}\r\n\r\nconst getAll = () => {\r\n  console.log('getting all?')\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst createFooditem = async (newFooditem) => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  console.log('config:', config)\r\n  const result = await axios.post(baseUrl, newFooditem, config)\r\n  return result\r\n}\r\n\r\nconst updateFooditem = (id, changedFooditem) => {\r\n  return axios.put(`${baseUrl}/${id}`, changedFooditem)\r\n}\r\n\r\nconst deleteFooditem = async (id) => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  console.log('config:', config)\r\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n  return response\r\n}\r\n\r\nconst fooditemService = {\r\n  setToken,\r\n  getAll,\r\n  createFooditem,\r\n  updateFooditem,\r\n  deleteFooditem\r\n\r\n}\r\n\r\nexport default fooditemService\r\n","import fooditemService from '../services/fooditem'\r\n\r\nexport const initFooditems = (fooditemList) => {\r\n  return {\r\n    type: 'INIT_FOODITEMS',\r\n    data: fooditemList\r\n  }\r\n}\r\n\r\nexport const addFooditem = (fooditem) => {\r\n  return async dispatch => {\r\n    try {\r\n      const createdItem = await fooditemService.createFooditem(fooditem)\r\n      console.log('DB created fooditem: ', createdItem.data)\r\n      await dispatch({\r\n        type: 'ADD_FOODITEM',\r\n        data: createdItem.data\r\n      })\r\n      return createdItem.data\r\n    }\r\n    catch (error) {\r\n      console.log('testing', error.response.data.error)\r\n      return error\r\n    }\r\n  }\r\n}\r\n\r\nexport const createFooditem = (fooditem) => {\r\n  return {\r\n    type: 'ADD_FOODITEM',\r\n    data: fooditem\r\n  }\r\n}\r\n\r\nexport const deleteFooditem = (fooditemId) => {\r\n  return async dispatch => {\r\n    try{\r\n      const deletedItem = await fooditemService.deleteFooditem(fooditemId)\r\n      console.log('Deleted:', deletedItem)\r\n      await dispatch({\r\n        type: 'DELETE_FOODITEM',\r\n        data: fooditemId\r\n      })\r\n      return null\r\n    }\r\n    catch (error) {\r\n      return error\r\n    }\r\n\r\n  }\r\n}\r\n\r\nconst fooditemReducer = (state = [], action) => {\r\n  switch (action.type){\r\n  case 'INIT_FOODITEMS':\r\n    return action.data\r\n  case 'ADD_FOODITEM':\r\n    return state.concat(action.data)\r\n  case 'DELETE_FOODITEM': {\r\n    const newState = state.filter(item => item.id !== action.data)\r\n    return newState\r\n  }\r\n  default:\r\n    return state\r\n  }\r\n}\r\n\r\nexport default fooditemReducer\r\n","export const setTimeoutHandle = (timeoutHandle) => {\r\n  return {\r\n    type: 'SET_TIMER',\r\n    data: {\r\n      timeoutHandle\r\n    }\r\n  }\r\n}\r\n\r\nconst timerReducer = (state = null, action) => {\r\n  switch (action.type) {\r\n  case 'SET_TIMER': {\r\n    window.clearTimeout(state)\r\n    return action.data.timeoutHandle\r\n  }\r\n  case 'CLEAR_TIMER':\r\n    clearTimeout(state)\r\n    return null\r\n  default:\r\n    return state\r\n  }\r\n}\r\n\r\nexport default timerReducer","import { setTimeoutHandle } from './timerReducer'\r\n\r\nexport const createNotification = (messageText, messageType, timeout = 5000) => {\r\n  console.log('creating notification!')\r\n  return async dispatch => {\r\n    await dispatch(setNotification(messageText, messageType))\r\n    await dispatch(setTimeoutHandle(setTimeout( () => {\r\n      dispatch(clearNotification())\r\n    }, timeout )))\r\n  }\r\n}\r\n\r\nconst setNotification = (messageText, messageType) => {\r\n  return {\r\n    type: 'SET_NOTIFICATION',\r\n    data: {\r\n      messageText,\r\n      messageType,\r\n    }\r\n  }\r\n}\r\n\r\nconst clearNotification = () => {\r\n  console.log('clearing!')\r\n  return {\r\n    type: 'CLEAR_NOTIFICATION'\r\n  }\r\n}\r\n\r\n\r\nconst notificationReducer = (state = null, action) => {\r\n  switch (action.type) {\r\n  case 'SET_NOTIFICATION':\r\n    return action.data\r\n  case 'CLEAR_NOTIFICATION':\r\n    return null\r\n  default:\r\n    return state\r\n  }\r\n}\r\n\r\nexport default notificationReducer","import { Button, Card, CardContent, Grid, Stack, TextField, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { addFooditem } from '../reducers/fooditemReducer'\r\nimport { createNotification } from '../reducers/notificationReducer'\r\n\r\n/*\r\nfoodItem: {\r\n  name: String,\r\n  protein: Number,\r\n  fat: Number,\r\n  carbohydrate: Number,\r\n  id: String (generated by db)\r\n}\r\n*/\r\nconst FooditemForm = ({ fooditemObject = {}, onSuccess = (() => null ), onCancel }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const handleAddFoodItem = async (event) => {\r\n    event.preventDefault()\r\n    console.log('Adding food item', event.target.food.value)\r\n\r\n    const foodItem = {\r\n      name: event.target.food.value,\r\n      protein: event.target.protein.value,\r\n      fat: event.target.fat.value,\r\n      carbohydrate: event.target.carb.value\r\n    }\r\n    const returnValue = await dispatch(addFooditem(foodItem))\r\n    if (returnValue instanceof Error) {\r\n      //reducer encountered an error and returned it\r\n      //console.log('Error creating fooditem:', returnValue.response.data.error)\r\n      dispatch(createNotification(returnValue.response.data.error))\r\n      //@TODO: Add to error notification window\r\n    } else {\r\n      //zero out form\r\n      event.target.food.value = ''\r\n      event.target.carbs.value = ''\r\n      event.target.protein.value = ''\r\n      event.target.fat.value = ''\r\n      console.log('returnValue sending back:', returnValue)\r\n      onSuccess(returnValue)\r\n    }\r\n\r\n  }\r\n  return (\r\n    <Card variant='outlined'>\r\n      <CardContent>\r\n        <Typography variant='h5'>\r\n              Create fooditem\r\n        </Typography>\r\n        <form onSubmit={handleAddFoodItem} onReset={onCancel}>\r\n          <Stack direction='column' spacing={1} >\r\n            <TextField name='food' id='food-name' variant='outlined' label='Food name' defaultValue={fooditemObject.name} />\r\n            <TextField name='carb' inputProps={{ inputMode: 'numeric', pattern: '([0-9]+\\\\[.,]?[0-9]*|\\\\[.,][0-9]+)' }} id='carbs' variant='outlined' label='Carbohydrates (per 100g)' />\r\n            <TextField name='fat' inputProps={{ inputMode: 'numeric', pattern: '([0-9]+\\\\[.,]?[0-9]*|\\\\[.,][0-9]+)' }} id='fat' variant='outlined' label='Fat (per 100g)' />\r\n            <TextField name='protein' inputProps={{ inputMode: 'numeric', pattern: '([0-9]+\\\\[.,]?[0-9]*|\\\\[.,][0-9]+)' }} id='protein' variant='outlined' label='Protein (per 100g)' />\r\n            <Button variant='contained' type='submit'>Create</Button>\r\n            <Button variant='outlined' type='reset'>Cancel</Button>\r\n          </Stack>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default FooditemForm\r\n","const generateId = () => {\r\n  return Math.floor(Math.random() * 10000)\r\n}\r\n\r\n\r\nexport const setActiveRecipe = (recipe) => {\r\n  //Recieve a whole recipe.\r\n  return {\r\n    type: 'SET_RECIPE',\r\n    data: recipe\r\n  }\r\n}\r\n\r\nexport const addIngredientToRecipe = (ingredient) => {\r\n  console.log('Ingredient: ', ingredient)\r\n  return {\r\n    type: 'ADD_INGREDIENT',\r\n    data: {\r\n      ...ingredient,\r\n      id: generateId()\r\n    }\r\n  }\r\n}\r\n\r\nexport const updateIngredientAmount = (ingredientId, newAmount) => {\r\n  return {\r\n    type: 'UPDATE_INGREDIENT_AMOUNT',\r\n    data: {\r\n      ingredientId,\r\n      newAmount\r\n    }\r\n  }\r\n}\r\n\r\nexport const deleteIngredient = (ingredientId) => {\r\n  return {\r\n    type: 'DELETE_INGREDIENT',\r\n    data: {\r\n      ingredientId\r\n    }\r\n  }\r\n}\r\n\r\n\r\nconst activeRecipeReducer = (state = null, action) => {\r\n  switch (action.type) {\r\n  case 'SET_RECIPE':{\r\n    return action.data\r\n  }\r\n  case 'ADD_INGREDIENT':{\r\n    const newIngredient = action.data\r\n    const ingredientsArray = state.ingredients.concat(newIngredient)\r\n    return { ...state, ingredients: ingredientsArray }\r\n  }\r\n  case 'UPDATE_INGREDIENT_AMOUNT': {\r\n    const ingredientToUpdate = state.ingredients.find((ingredient) => ingredient.id === action.data.ingredientId)\r\n    const updatedIngredient = {\r\n      ...ingredientToUpdate,\r\n      amount: action.data.newAmount\r\n    }\r\n    const newIngredientList = state.ingredients.map((ingredient) => ingredient.id !== updatedIngredient.id ? ingredient : updatedIngredient)\r\n    //console.log('New state:', { ...state, ingredients: newIngredientList } )\r\n    return { ...state, ingredients: newIngredientList }\r\n  }\r\n  case 'DELETE_INGREDIENT': {\r\n    const newIngredientsArray = state.ingredients.filter(ingredient => ingredient.id !== action.data.ingredientId)\r\n    return { ...state, ingredients: newIngredientsArray }\r\n  }\r\n  default:\r\n    return state\r\n  }\r\n}\r\n\r\nexport default activeRecipeReducer","import axios from 'axios'\r\n//const baseUrl = 'http://localhost:3003/api/recipes'\r\nconst baseUrl = '/api/recipes'\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n  token = `bearer ${newToken}`\r\n  console.log('token set:', token)\r\n}\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst getRecipe = (id) => {\r\n  console.log('getting local recipe')\r\n  return axios.get(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst createRecipe = (newRecipe) => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n\r\n  return axios.post(baseUrl, newRecipe, config)\r\n}\r\n\r\nconst updateRecipe = (changedRecipe) => {\r\n  if (token === null) {\r\n    //No authorization\r\n    const error = new Error()\r\n    error.name = 'AuthenticationError'\r\n    error.message = 'You need to be logged in in order to save to server'\r\n    throw error\r\n  }\r\n\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n\r\n  return axios.put(`${baseUrl}/${changedRecipe.id}`, changedRecipe, config)\r\n}\r\n\r\nconst deleteRecipe = (recipeToDelete) => {\r\n  if (token === null) {\r\n    //No authorization\r\n    const error = new Error()\r\n    error.name = 'AuthenticationError'\r\n    error.message = 'You need to be logged in in order to delete recipe'\r\n    throw error\r\n  }\r\n\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  return axios.delete(`${baseUrl}/${recipeToDelete.id}`, config)\r\n}\r\n\r\nconst addIngredientToRecipe = (recipe, ingredient) => {\r\n  if (token === null) {\r\n    //No authorization\r\n    const error = new Error()\r\n    error.name = 'AuthenticationError'\r\n    error.message = 'You need to be logged in in order to modify a recipe'\r\n    throw error\r\n  }\r\n\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  return axios.post(`${baseUrl}/${recipe.id}/ingredients`, ingredient, config)\r\n\r\n}\r\n\r\nconst updateAllIngredients = (recipe, ingredientsList) => {\r\n  if (token === null) {\r\n    //No authorization\r\n    const error = new Error()\r\n    error.name = 'AuthenticationError'\r\n    error.message = 'You need to be logged in in order to modify a recipe'\r\n    throw error\r\n  }\r\n\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  return axios.put(`${baseUrl}/${recipe.id}/ingredients`, ingredientsList, config)\r\n}\r\n\r\nconst updateIngredientInRecipe = (recipe, ingredient) => {\r\n  if (token === null) {\r\n    //No authorization\r\n    const error = new Error()\r\n    error.name = 'AuthenticationError'\r\n    error.message = 'You need to be logged in in order to modify a recipe'\r\n    throw error\r\n  }\r\n\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  return axios.put(`${baseUrl}/${recipe.id}/ingredients/${ingredient.id}`, ingredient, config)\r\n}\r\n\r\nconst deleteIngredientFromRecipe = (recipe, ingredientId) => {\r\n  if (token === null) {\r\n    //No authorization\r\n    const error = new Error()\r\n    error.name = 'AuthenticationError'\r\n    error.message = 'You need to be logged in in order to modify a recipe'\r\n    throw error\r\n  }\r\n\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  return axios.delete(`${baseUrl}/${recipe.id}/ingredients/${ingredientId}`, config)\r\n}\r\n\r\n\r\nconst recipeService = {\r\n  getAll,\r\n  getRecipe,\r\n  createRecipe,\r\n  updateRecipe,\r\n  deleteRecipe,\r\n  setToken,\r\n  addIngredientToRecipe,\r\n  updateIngredientInRecipe,\r\n  deleteIngredientFromRecipe,\r\n  updateAllIngredients\r\n}\r\n\r\nexport default recipeService","//NO async with thunk yet\r\n//import recipeService from '../services/recipes'\r\n\r\nexport const initRecipes = (recipeList) => {\r\n\r\n  return {\r\n    type: 'INIT_RECIPES',\r\n    data: recipeList\r\n  }\r\n}\r\n\r\nexport const updateRecipe = (recipe) => {\r\n  return {\r\n    type: 'UPDATE_RECIPE',\r\n    data: recipe\r\n  }\r\n}\r\n\r\nexport const addRecipe = (recipe) => {\r\n  return {\r\n    type: 'ADD_RECIPE',\r\n    data: recipe\r\n  }\r\n}\r\n\r\nexport const deleteRecipe = (recipe) => {\r\n  return {\r\n    type: 'DELETE_RECIPE',\r\n    data: recipe\r\n  }\r\n}\r\n\r\nconst recipeReducer = (state = [], action) => {\r\n  switch (action.type) {\r\n  case 'INIT_RECIPES':\r\n    return action.data\r\n  case 'ADD_RECIPE':\r\n    return state.concat(action.data)\r\n  case 'UPDATE_RECIPE':{\r\n    const selectedRecipe = state.find(recipe => recipe.id === action.data.id)\r\n    console.log('Updated recipe ', selectedRecipe )\r\n    return state.map(recipe => recipe.id !== action.data.id ? recipe : action.data)\r\n  }\r\n  case 'DELETE_RECIPE': {\r\n    const newState = state.filter(recipe => recipe.id !== action.data.id)\r\n    return newState\r\n  }\r\n  default:\r\n    return state\r\n  }\r\n}\r\n\r\nexport default recipeReducer","import React from 'react'\r\nimport { useState } from 'react'\r\nimport TableRow from '@mui/material/TableRow'\r\nimport TableCell from '@mui/material/TableCell'\r\nimport { Box, Button, ButtonGroup, IconButton, Popover, Typography } from '@mui/material'\r\nimport DeleteIcon from '@mui/icons-material/Delete'\r\n\r\n\r\nconst RecipeListItem = ({ recipe, handleCloneRecipe, handleShowRecipe, handleDeleteRecipe }) => {\r\n\r\n  const [ visibleDeleteField, setVisibleDeleteField ] = useState(false)\r\n  const [ anchorElConfirmDialog, setAnchorElConfirmDialog] = useState(null)\r\n\r\n  const handleOpenDeleteConfirmation = (event) => {\r\n    setAnchorElConfirmDialog(event.currentTarget)\r\n\r\n  }\r\n  const handleCloseDeleteConfirmation = () => {\r\n    setAnchorElConfirmDialog(null)\r\n  }\r\n\r\n  const handleDeleteRecipeClicked = () => {\r\n    setAnchorElConfirmDialog(null)\r\n    handleDeleteRecipe(recipe)\r\n  }\r\n\r\n  return(\r\n    <TableRow key={recipe.id} sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">{recipe.title}</TableCell>\r\n      <TableCell>{recipe.date}</TableCell>\r\n      <TableCell>{recipe.owner.username}</TableCell>\r\n      <TableCell align='right' size='small'>\r\n        <ButtonGroup><Button variant='contained' onClick={() => handleCloneRecipe(recipe) }>Copy</Button>\r\n          {recipe.template ?\r\n            <>\r\n              <Button variant='outlined'>Edit</Button>\r\n              <IconButton aria-label=\"delete\" disabled>\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            </>\r\n            :\r\n            <>\r\n              <Button variant='contained' onClick={() => handleShowRecipe(recipe)}>Edit</Button>\r\n              <IconButton aria-label=\"delete\" color=\"primary\" onClick={handleOpenDeleteConfirmation}>\r\n                <DeleteIcon />\r\n              </IconButton>\r\n              <Popover\r\n                component=\"div\"\r\n                id='confirm-dialog'\r\n                open={Boolean(anchorElConfirmDialog)}\r\n                anchorEl={anchorElConfirmDialog}\r\n                onClose={handleCloseDeleteConfirmation}\r\n                anchorOrigin={{\r\n                  vertical: 'bottom',\r\n                  horizontal: 'left',\r\n                }}\r\n              >\r\n                <Box\r\n                  sx={{\r\n                    alignContent: 'right',\r\n                    p: 1\r\n\r\n                  }}\r\n                >\r\n                  <Typography\r\n                    variant='body1'\r\n                    sx={{\r\n                      color: 'inherit',\r\n                      p: 2\r\n                    }}\r\n                  >\r\n                  Really delete?\r\n                  </Typography>\r\n                  <ButtonGroup>\r\n                    <Button\r\n                      variant='contained'\r\n                      color='warning'\r\n                      onClick={handleDeleteRecipeClicked}\r\n                    >\r\n                    Yes\r\n                    </Button>\r\n                    <Button\r\n                      variant='outlined'\r\n                      onClick={handleCloseDeleteConfirmation}\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </ButtonGroup>\r\n\r\n                </Box>\r\n              </Popover>\r\n            </>\r\n          }\r\n        </ButtonGroup>\r\n      </TableCell>\r\n      <br/>\r\n      {visibleDeleteField ?\r\n        <Box>Really delete?<button onClick={() => handleDeleteRecipe(recipe)}>Yes</button><button onClick={() => setVisibleDeleteField(false)}>No</button> </Box> :\r\n        <></>\r\n      }\r\n    </TableRow>\r\n  )\r\n}\r\n\r\nexport default RecipeListItem","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setActiveRecipe } from '../reducers/activeRecipeReducer'\r\nimport { useHistory } from 'react-router'\r\nimport recipeService from '../services/recipes'\r\nimport { addRecipe, deleteRecipe } from '../reducers/recipeReducer'\r\nimport RecipeListItem from './RecipeListItem'\r\nimport { Table, TableBody, TableHead, TableContainer, TableCell, TableRow } from '@mui/material'\r\nimport Paper from '@mui/material/Paper'\r\nimport { createNotification } from '../reducers/notificationReducer'\r\n\r\n\r\nconst RecipeList = () => {\r\n  const recipes = useSelector(state => state.recipes)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const handleShowRecipe = (recipe) => {\r\n    console.log('handled show recipe')\r\n    dispatch(setActiveRecipe(recipe))\r\n    history.push(`/recipe/${recipe.id}`)\r\n  }\r\n\r\n  const handleCloneRecipe = async (recipe) => {\r\n\r\n    let { id, ...recipeWithoutId } = recipe\r\n    console.log('WithoutID?', recipeWithoutId)\r\n    recipeWithoutId = { ...recipeWithoutId, template: false }\r\n\r\n    const today = (new Date()).toLocaleDateString('no-no')\r\n    //Handle naming in backend\r\n    //recipeWithoutId.title = `${recipeWithoutId.title} - ${today}`\r\n    console.log(recipeWithoutId.name)\r\n    try {\r\n      const response = await recipeService.createRecipe(recipeWithoutId)\r\n      dispatch(addRecipe(response.data))\r\n      history.push(`/recipe/${response.data.id}`)\r\n    } catch (error) {\r\n      console.log('Failed to clone recipe')\r\n    }\r\n  }\r\n\r\n  const handleDeleteRecipe = async (recipe) => {\r\n    console.log('Delete clicked for recipe: ', recipe.id )\r\n    try {\r\n      const response = await recipeService.deleteRecipe(recipe)\r\n      console.log('deleted recipe', response)\r\n      dispatch(deleteRecipe(recipe))\r\n      dispatch(createNotification('Recipe deleted'))\r\n    } catch (error) {\r\n      if (error.response.status === 401)\r\n        dispatch(createNotification('Could not delete recipe: Not authorized'))\r\n      else\r\n        dispatch(createNotification(error.response.data.error))\r\n    }\r\n  }\r\n\r\n  return(\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>\r\n              Name\r\n            </TableCell>\r\n            <TableCell>\r\n              Date created\r\n            </TableCell>\r\n            <TableCell>\r\n              Recipe Owner\r\n            </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {recipes.map((recipe) =>\r\n            <RecipeListItem key={recipe.id}\r\n              recipe={recipe}\r\n              handleCloneRecipe={handleCloneRecipe}\r\n              handleShowRecipe={handleShowRecipe}\r\n              handleDeleteRecipe={handleDeleteRecipe}\r\n            />\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  )\r\n}\r\n\r\nexport default RecipeList","const caloriesIn = (ingredient) => {\r\n  //console.log('IngredientCalc - ingredient:', ingredient)\r\n  const calInFat = 9\r\n  const calInProtein = 4\r\n  const calInCarb = 4\r\n  const calPer100 = calInFat * ingredient.fooditem.fat + calInProtein * ingredient.fooditem.protein + calInCarb * ingredient.fooditem.carbohydrate\r\n  const totalCal = calPer100 * ingredient.amount / 100\r\n  return totalCal\r\n}\r\n\r\nconst calcTotalCalOf = (ingredients) => {\r\n  const totalCal = ingredients.reduce((totalCal, ingredient) => {\r\n    return totalCal + ingredientCalc.caloriesIn(ingredient)\r\n  }, 0)\r\n  return totalCal\r\n}\r\n\r\nconst calcTotalFatOf = (ingredients) => {\r\n  const totalFat = ingredients.reduce((totalFat, ingredient) => {\r\n    return totalFat + ingredient.fooditem.fat * ingredient.amount / 100\r\n  }, 0)\r\n  return totalFat\r\n}\r\n\r\nconst calcTotalProteinOf = (ingredients) => {\r\n  const totalProtein = ingredients.reduce((totalProtein, ingredient) => {\r\n    return totalProtein + ingredient.fooditem.protein * ingredient.amount / 100\r\n  }, 0)\r\n  return totalProtein\r\n}\r\n\r\nconst calcTotalCarbsOf = (ingredients) => {\r\n  const totalCarbs = ingredients.reduce((totalCarbs, ingredient) => {\r\n    return totalCarbs + ingredient.fooditem.carbohydrate * ingredient.amount / 100\r\n  }, 0)\r\n  return totalCarbs\r\n}\r\n\r\nconst ingredientCalc = {\r\n  caloriesIn,\r\n  calcTotalCalOf,\r\n  calcTotalCarbsOf,\r\n  calcTotalFatOf,\r\n  calcTotalProteinOf\r\n}\r\n\r\nexport default ingredientCalc","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { updateIngredientAmount, deleteIngredient } from '../reducers/activeRecipeReducer'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Accordion, Box, AccordionSummary, AccordionDetails, Slider, Button, Typography, Stack } from '@mui/material'\r\nimport DeleteOutline from '@mui/icons-material/Delete'\r\n\r\n\r\nconst Ingredient = ({ ingredient, updateAmount }) => {\r\n  const dispatch = useDispatch()\r\n\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n\r\n  const [amount, setAmount] = useState(ingredient.amount)\r\n  const [sliderValue, setSliderValue] = useState(ingredient.amount)\r\n  const [sliderMinValue, setSliderMinValue] = useState(ingredient.amount - 50 < 0 ? 0 : ingredient.amount - 50)\r\n  const [sliderMaxValue, setSliderMaxValue] = useState(Number(ingredient.amount) + 50)\r\n\r\n  const increaseAmountByOne = () => {\r\n    const currentAmount = amount\r\n    setAmount(currentAmount + 1)\r\n    setSliderValue(currentAmount + 1)\r\n    dispatch(updateIngredientAmount(ingredient.id, currentAmount + 1))\r\n  }\r\n  const decreaseAmountByOne = () => {\r\n    if(amount > 0) {\r\n      const currentAmount = amount\r\n      setAmount(currentAmount - 1)\r\n      setSliderValue(currentAmount - 1)\r\n      dispatch(updateIngredientAmount(ingredient.id, currentAmount - 1))\r\n    }\r\n  }\r\n\r\n  const handleSliderAmount = (event) => {\r\n    setAmount(event.target.value)\r\n    setSliderValue(event.target.value)\r\n    if (event.target.value === sliderMinValue) {\r\n      setSliderMinValue(event.target.value - 10 < 0 ? 0 : event.target.value - 10)\r\n      setSliderMaxValue(sliderMinValue + 100)\r\n    } else if (event.target.value === sliderMaxValue) {\r\n      setSliderMaxValue(sliderMaxValue + 10)\r\n      setSliderMinValue(sliderMinValue + 10)\r\n    }\r\n\r\n    dispatch(updateIngredientAmount(ingredient.id, event.target.value))\r\n  }\r\n\r\n  const handleAmountUpdate = (value) => {\r\n    setAmount(value)\r\n    setSliderValue(value)\r\n    dispatch(updateIngredientAmount(ingredient.id, value))\r\n  }\r\n\r\n  const handleDeleteIngredient = () => {\r\n    //deleteIngredient(ingredient.id)\r\n    console.log('attempt to delete ingredient', ingredient)\r\n    dispatch(deleteIngredient(ingredient.id))\r\n  }\r\n\r\n  return (\r\n    <Accordion>\r\n      <AccordionSummary>\r\n        <Stack direction='row'  flexGrow={1} justifyContent='space-between'>\r\n          <Typography sx={{ display: 'inline-flex' }}>{ingredient.fooditem.name}</Typography>\r\n          <Typography sx={{ display: 'flex', color: 'text.secondary', }}>{ingredient.amount} {ingredient.amountUnit}</Typography>\r\n        </Stack>\r\n        {/*<td style={{ width: 100 }} onClick={() => setEditMode(!editMode)}>{ingredient.fooditem.name}</td>\r\n        <td><input value={amount} size='10' onChange={({ target }) => handleAmountUpdate(target.value)} />{ingredient.amountUnit}</td>\r\n        <td>\r\n          <button onClick={() => increaseAmountByOne()}>Increase</button>\r\n          <button onClick={() => decreaseAmountByOne()}>Decrease</button>\r\n          <input value={sliderValue} type='range' min='0' max='1000' onChange={handleSliderAmount}></input>\r\n          <button onClick={() => handleDeleteIngredient()}>Delete</button>\r\n        </td>\r\n      */}\r\n      </AccordionSummary>\r\n      <AccordionDetails>\r\n        <Box sx={{ ml: 2 }}>\r\n          <Stack direction='row' justifyContent='space-between' spacing={3}>\r\n            <Slider\r\n              marks={[\r\n                {\r\n                  value: sliderMinValue,\r\n                  label: `${sliderMinValue} ${ingredient.amountUnit}`\r\n                },\r\n                {\r\n                  value: sliderMaxValue,\r\n                  label: `${sliderMaxValue} ${ingredient.amountUnit}`\r\n                }\r\n              ]}\r\n              min={sliderMinValue}\r\n              max={sliderMaxValue}\r\n              value={sliderValue}\r\n              onChange={handleSliderAmount}\r\n            >\r\n            </Slider>\r\n            <Button variant='outlined' onClick={handleDeleteIngredient}><DeleteOutline /></Button>\r\n          </Stack>\r\n        </Box>\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  )\r\n}\r\nexport default Ingredient","import { Autocomplete, Card, CardContent, TextField, Stack, FormControl, Select, MenuItem, Button, Collapse, Dialog } from '@mui/material'\r\nimport React, { useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { addIngredientToRecipe } from '../reducers/activeRecipeReducer'\r\nimport { createFilterOptions } from '@mui/material'\r\nimport FooditemForm from './FooditemForm'\r\n\r\nconst filter = createFilterOptions()\r\n\r\nconst IngredientForm = () => {\r\n  const fooditems = useSelector(state => state.fooditems)\r\n  const dispatch = useDispatch()\r\n\r\n  const [fooditemObject, setFooditemObject] = useState( { name: '' } )\r\n  const [fooditemAmount, setFooditemAmount] = useState(0)\r\n  const [fooditemUnit, setFooditemUnit] = useState('g')\r\n\r\n  const [showForm, setShowForm] = useState(false)\r\n  //dialog window to create new fooditem\r\n  const [dialogOpen, setDialogOpen] = useState(false)\r\n\r\n  const addIngredient = (event) => {\r\n    if(event !== undefined) event.preventDefault()\r\n    if(fooditemObject === null) {window.alert('Please select a food from the menu')\r\n      return\r\n    }\r\n    console.log('fooditem', fooditemObject)\r\n    console.log('amount', fooditemAmount)\r\n    console.log('amountUnit', fooditemUnit)\r\n\r\n\r\n    //Check if ID is valid?\r\n\r\n    if (fooditemObject.createNew) {\r\n      //Pass it over to the Dialog and its success function\r\n      setDialogOpen(true)\r\n    } else {\r\n\r\n      const newIngredient = {\r\n        fooditemId: fooditemObject.id,\r\n        amount: fooditemAmount,\r\n        amountUnit: fooditemUnit,\r\n      }\r\n\r\n      dispatch(addIngredientToRecipe(newIngredient))\r\n\r\n      resetIngredientForm()\r\n      console.log('new ingredient', newIngredient)\r\n\r\n    }\r\n  }\r\n\r\n  const resetIngredientForm = () => {\r\n    setShowForm(false)\r\n    setDialogOpen(false)\r\n    setFooditemObject( { name: '' } )\r\n    setFooditemAmount(0)\r\n    setFooditemUnit('g')\r\n\r\n  }\r\n\r\n  const handleCloseDialog = () => {\r\n    setDialogOpen(false)\r\n  }\r\n\r\n  const handleSuccess = (returnValue) => {\r\n    console.log('FooditemForm successfull in creating')\r\n    console.log(returnValue)\r\n    setFooditemObject(returnValue)\r\n    const newIngredient = {\r\n      fooditemId: returnValue.id,\r\n      amount: fooditemAmount,\r\n      amountUnit: fooditemUnit\r\n    }\r\n    console.log('new Ingredient: ', newIngredient)\r\n    dispatch(addIngredientToRecipe(newIngredient))\r\n    setDialogOpen(false)\r\n    resetIngredientForm()\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Card variant='outlined'>\r\n        <CardContent>\r\n          <form onSubmit={addIngredient} onReset={resetIngredientForm}>\r\n            <FormControl fullWidth >\r\n              <Autocomplete\r\n                disablePortal\r\n                selectOnFocus\r\n                clearOnBlur\r\n                handleHomeEndKeys\r\n                freeSolo\r\n                autoSelect\r\n                id='fooditemAutocomplete'\r\n                value={fooditemObject}\r\n                options={fooditems}\r\n                getOptionLabel={(option) => {\r\n                  if (typeof (option) === 'string') {\r\n                    return option\r\n                  }\r\n                  return option.name\r\n                }}\r\n                onOpen={() => setShowForm(true)}\r\n                onChange={ (event, obj) => {\r\n                  if(typeof(obj) === 'string') {\r\n                    console.log('onchange found string')\r\n                    // if the string is a valid name in the options, set the object from options\r\n                    const existingFooditem = fooditems.find((fooditem) => fooditem.name === obj)\r\n                    if(existingFooditem) {\r\n                      console.log('setting fooditem', existingFooditem)\r\n                      setFooditemObject(existingFooditem)\r\n                    } else {\r\n                    //Else set an object with createNew: true\r\n                      console.log('Did not find fooditem, flagging for create')\r\n                      setFooditemObject({\r\n                        name: obj,\r\n                        createNew: true\r\n                      })\r\n                    }\r\n                  } else if(obj && obj.inputValue) {\r\n                    console.log('onchange found object')\r\n                    console.log('Object', obj)\r\n                    console.log('inputValue', obj.inputValue)\r\n                    setFooditemObject({\r\n                      name: obj.inputValue,\r\n                      createNew: true\r\n                    })\r\n                  } else {\r\n                    console.log('onchange found option from alternatives')\r\n                    setFooditemObject(obj)\r\n                  }\r\n                }}\r\n                renderOption={ (props, option) => <li {... props}>{option.name}</li>}\r\n                renderInput={ (params) => <TextField {...params} label='Add Ingredient' />}\r\n                filterOptions={ (options, params) => {\r\n                  const filtered = filter(options,params)\r\n\r\n                  const { inputValue } = params\r\n                  const isExistingValue = options.some((option) => inputValue === option.name)\r\n                  if (inputValue !== '' && !isExistingValue) {\r\n                    filtered.push({\r\n                      inputValue,\r\n                      name: `Create \"${inputValue}\"`,\r\n                    })\r\n                  }\r\n                  return filtered\r\n                }}\r\n              />\r\n\r\n              <Collapse in={showForm} timeout='auto' unmountOnExit >\r\n                <FormControl fullWidth sx={{ py:1 }}>\r\n                  <TextField id='amount' label='amount' type='number' value={fooditemAmount} onChange={(event) => setFooditemAmount(event.target.value)} />\r\n                </FormControl>\r\n                <FormControl fullWidth sx={{ py: 0 }}>\r\n                  <Select\r\n                    value={fooditemUnit}\r\n                    onChange={(event) => { setFooditemUnit(event.target.value)}}>\r\n                    <MenuItem value='g'>gram (g)</MenuItem>\r\n                    <MenuItem value='ml'>milliliter (ml)</MenuItem>\r\n                    <MenuItem value='tbsp'>tablespoon (tbsp)</MenuItem>\r\n                    <MenuItem value='tsp'>teaspoon (tsp)</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n                <FormControl sx={{ py:1 }} >\r\n                  <Stack direction='row' spacing={ 1 }>\r\n                    <Button type='submit' variant='contained'>Add</Button>\r\n                    <Button type='reset' variant='outlined'>Cancel</Button>\r\n                  </Stack>\r\n                </FormControl>\r\n              </Collapse>\r\n            </FormControl>\r\n          </form>\r\n          <Dialog open={dialogOpen} onClose={handleCloseDialog}>\r\n            <FooditemForm fooditemObject={fooditemObject} onCancel={() => {setDialogOpen(false)}} onSuccess={handleSuccess} />\r\n          </Dialog>\r\n        </CardContent>\r\n\r\n      </Card>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default IngredientForm","import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport ingredientCalc from '../utils/ingredientCalc'\r\nimport Ingredient from './Ingredient'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useParams, useHistory } from 'react-router'\r\nimport { setActiveRecipe } from '../reducers/activeRecipeReducer'\r\nimport recipeService from '../services/recipes'\r\nimport { Box, Typography, Button, Stack, Card, CardContent, Grid, Table, TableHead, TableBody, TableRow, TableCell, Input, TextField, InputAdornment, OutlinedInput, CircularProgress } from '@mui/material'\r\nimport SaveIcon from '@mui/icons-material/Save'\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload'\r\nimport DeleteIcon from '@mui/icons-material/Delete'\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\r\nimport { useState } from 'react'\r\nimport IngredientForm from './IngredientForm'\r\nimport EditIcon from '@mui/icons-material/EditOutlined'\r\nimport { createNotification } from '../reducers/notificationReducer'\r\nimport { updateRecipe } from '../reducers/recipeReducer'\r\nimport CancelIcon from '@mui/icons-material/CancelOutlined'\r\n\r\nconst Recipe = () => {\r\n  const activeRecipe = useSelector(state => state.activeRecipe)\r\n  const fooditems = useSelector(state => state.fooditems)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const [servings, setServings] = useState(1)\r\n\r\n  const [editTitle, setEditTitle] = useState(false)\r\n  const [titleField, setTitleField] = useState('')\r\n\r\n  let ingredients = null\r\n  const id = useParams().id\r\n  useEffect(() => {\r\n    //check if local saved recipe\r\n    const savedRecipeJSON = window.localStorage.getItem(`savedRecipe${id}`)\r\n    if (savedRecipeJSON) {\r\n      console.log('found save:', JSON.parse(savedRecipeJSON))\r\n      const decodedSave = JSON.parse(savedRecipeJSON)\r\n      console.log(decodedSave)\r\n      dispatch(setActiveRecipe(decodedSave.activeRecipe))\r\n      setTitleField(decodedSave.activeRecipe.title)\r\n      //ingredients = decodedSave.ingredients\r\n    } else {\r\n      //get from the backend\r\n      recipeService\r\n        .getRecipe(id)\r\n        .then(response => {\r\n          dispatch(setActiveRecipe(response.data))\r\n          setTitleField(response.data.title)\r\n        })\r\n    }\r\n  }, [])\r\n\r\n  if(!activeRecipe) return <p>Waiting for activeRecipe to be set</p>\r\n  if(fooditems.length === 0) return <Grid item xs={12}><CircularProgress /></Grid>\r\n  console.log('Fooditems currently: ', fooditems)\r\n  if(!ingredients) {\r\n    ingredients = activeRecipe.ingredients.map(ingredient => {\r\n      const fooditem = fooditems.find(item => item.id === ingredient.fooditemId)\r\n      if(fooditem === undefined) {\r\n        console.log('Fooditem in recipe not found in fooditem list')\r\n        return {\r\n          fooditem:\r\n            {\r\n              name: '<Deleted fooditem>',\r\n              protein: 0,\r\n              fat: 0,\r\n              carbohydrate: 0,\r\n              id: 0\r\n            },\r\n          amount: 0,\r\n          amountUnit: 'g',\r\n          id: ingredient.id\r\n        }\r\n      }\r\n      else {\r\n        //console.log('found fooditem' ,fooditem)\r\n        ingredient.fooditem = fooditem\r\n        return ingredient\r\n      }\r\n    })\r\n  }\r\n  console.log('ingredients:',ingredients)\r\n\r\n  const updateIngredientAmount = (ingredientId, amount) => {\r\n    console.log('Want to save these changes: ', ingredientId, amount)\r\n    //first find ingredient to update\r\n    //Need a callback to App.\r\n  }\r\n\r\n  const localSave = () => {\r\n    const saveObject = {\r\n      activeRecipe: activeRecipe,\r\n      ingredients: ingredients\r\n    }\r\n    console.log('saving following ingredients:', ingredients)\r\n    window.localStorage.setItem(`savedRecipe${id}`, JSON.stringify(saveObject))\r\n  }\r\n  const cancelAndReturn = () => {\r\n    window.localStorage.removeItem(`savedRecipe${id}`)\r\n    history.push('/')\r\n\r\n  }\r\n\r\n  const saveToBackend = async () => {\r\n    localSave()\r\n    try {\r\n      const response = await recipeService.updateAllIngredients(activeRecipe, ingredients)\r\n      console.log('response return data', response.data)\r\n      dispatch(setActiveRecipe(response.data))\r\n    } catch (error) {\r\n      if (typeof error.response.data.error !== 'undefined')\r\n        dispatch(createNotification(error.response.data.error))\r\n      else if (typeof error.message !== 'undefined'){\r\n        dispatch(createNotification(error.message))\r\n      }\r\n      else {\r\n        dispatch(createNotification('Some kind of error happened'))\r\n      }\r\n    }\r\n  }\r\n\r\n  const saveRecipeTitle = async (event) => {\r\n    event.preventDefault()\r\n    console.log(event.target.title.value)\r\n    //activeRecipe.title = event.target.title.value\r\n\r\n    const updateData = {\r\n      id: activeRecipe.id,\r\n      title: titleField\r\n    }\r\n    //attempt save to server.\r\n    //If duplicate title, show error notification, and do not leave edit mode\r\n    try {\r\n      const response = await recipeService.updateRecipe(updateData)\r\n\r\n      //Ignore ingredient data from response, keep local values.\r\n      //Update the local recipedata\r\n      //Save updated recipe locally, in active recipe and in the recipe list\r\n      console.log('received title', response.data.title)\r\n      activeRecipe.title = response.data.title\r\n      setTitleField(activeRecipe.title)\r\n      localSave()\r\n      dispatch(setActiveRecipe(activeRecipe))\r\n      dispatch(updateRecipe(activeRecipe))\r\n      setEditTitle(false)\r\n    } catch (error) {\r\n      console.log(error)\r\n      //Check if error is from server or locally\r\n      if (typeof error.response.data.error !== 'undefined'){\r\n        dispatch(createNotification(error.response.data.error))\r\n      }\r\n      else if (typeof error.message !== 'undefined'){\r\n        dispatch(createNotification(error.message))\r\n      }\r\n      else {\r\n        dispatch(createNotification('Some kind of error happened'))\r\n      }\r\n    }\r\n  }\r\n\r\n  const cancelTitleEdit = () => {\r\n    setTitleField(activeRecipe.title)\r\n    setEditTitle(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Grid item xs={12}>\r\n        {editTitle ?\r\n          <form onSubmit={saveRecipeTitle}>\r\n            <OutlinedInput\r\n              size='small'\r\n              id='recipe-title'\r\n              inputProps={{\r\n                style: { fontSize: 35 },\r\n              }}\r\n              value={titleField}\r\n              onChange={(event) => setTitleField(event.target.value)}\r\n              endAdornment={<InputAdornment position=\"end\"><Button type='submit'><SaveIcon /></Button><Button onClick={cancelTitleEdit}><CancelIcon /></Button></InputAdornment>}\r\n              name='title'\r\n            />\r\n          </form> :\r\n          <Typography\r\n            variant='h4'\r\n            sx={{\r\n              m: 2\r\n            }}>\r\n            {activeRecipe.title}\r\n            <Button onClick={() => setEditTitle(!editTitle)}><EditIcon /></Button>\r\n          </Typography>\r\n        }\r\n\r\n\r\n\r\n        <Stack direction='row' spacing={1}>\r\n          <Button variant='contained' startIcon={<CloudUploadIcon />} onClick={saveToBackend} >\r\n          Server\r\n          </Button>\r\n          <Button variant='outlined' startIcon={<SaveIcon />} onClick={localSave}>Local</Button>\r\n          <Button variant='outlined' startIcon={<DeleteIcon />} onClick={cancelAndReturn}>Discard changes</Button>\r\n\r\n        </Stack>\r\n      </Grid>\r\n      <Grid item xl={4} lg={4} md={6} sm={8} xs={12} >\r\n        <Card variant='outlined'\r\n          sx={{\r\n            gridRow: '1',\r\n            gridColumn: 'span 2',\r\n          }}>\r\n          <CardContent>\r\n            <Typography variant='h5'>Ingredients</Typography>\r\n\r\n          </CardContent>\r\n          <CardContent>\r\n            <IngredientForm />\r\n            {ingredients.map((ingredient) =>\r\n              <Ingredient key={ingredient.id} ingredient={ingredient} updateAmount={updateIngredientAmount} />\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </Grid>\r\n      {/* <IngredientForm /> */}\r\n      <Grid item xl={4} lg={4} md={6} sm={8} xs={12} >\r\n        <Card variant='outlined'\r\n          sx={{\r\n          }}\r\n        >\r\n          <CardContent>\r\n            <Typography variant='h5'>\r\n            Nutritional information\r\n            </Typography>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>\r\n                  X\r\n                  </TableCell>\r\n                  <TableCell>\r\n                  Total\r\n                  </TableCell>\r\n                  <TableCell>\r\n                  Per serving\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow>\r\n                  <TableCell>\r\n                  Calories\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {ingredientCalc.calcTotalCalOf(ingredients)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {(ingredientCalc.calcTotalCalOf(ingredients) / servings).toFixed(0)} kcal\r\n                  </TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>\r\n                  Carbs\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {ingredientCalc.calcTotalCarbsOf(ingredients)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {(ingredientCalc.calcTotalCarbsOf(ingredients) / servings).toFixed(0)} g\r\n                  </TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>\r\n                  Fat\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {ingredientCalc.calcTotalFatOf(ingredients)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {(ingredientCalc.calcTotalFatOf(ingredients) / servings).toFixed(0)} g\r\n                  </TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>\r\n                  Protein\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {ingredientCalc.calcTotalProteinOf(ingredients)} g\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {(ingredientCalc.calcTotalProteinOf(ingredients) / servings).toFixed(0)} g\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n            <Typography variant='body1'>\r\n              Number of servings: {' '}\r\n              <Input value={servings} onChange={(event) => setServings(event.target.value)}\r\n                inputProps={{\r\n                  step: 1,\r\n                  min: 1,\r\n                  max: 100,\r\n                  type: 'number'\r\n                }}\r\n                sx={{\r\n                  maxWidth: 42\r\n                }}\r\n              />\r\n            </Typography>\r\n\r\n          </CardContent>\r\n        </Card>\r\n      </Grid>\r\n    </>\r\n  )\r\n\r\n}\r\n\r\nexport default Recipe","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { deleteFooditem } from '../reducers/fooditemReducer'\r\nimport { createNotification } from '../reducers/notificationReducer'\r\nimport { Card, CardContent, Table, TableBody, TableCell, TableHead, TableRow, Typography, Grid, Button } from '@mui/material'\r\nimport DeleteIcon from '@mui/icons-material/DeleteForeverOutlined'\r\n\r\nconst FooditemList = () => {\r\n  const fooditemList = useSelector(state => state.fooditems)\r\n  // eslint-disable-next-line no-unused-vars\r\n  const dispatch = useDispatch()\r\n\r\n  const handleDelete = async (id) => {\r\n    const returnvalue = await dispatch(deleteFooditem(id))\r\n    if(returnvalue) {\r\n      console.log('received error: ', returnvalue.response.data.error)\r\n      dispatch(createNotification(returnvalue.message + ' - ' + returnvalue.response.data.error, 'error'))\r\n    } else {\r\n      console.log('retrnvalue null, success!')\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={2} flexWrap='wrap' justifyContent='flex-start' >\r\n      <Grid item xl={6} lg={8} md={10} sm={12}>\r\n        <Typography variant='h4' sx={{ m: 2 }}>Fooditems</Typography>\r\n        <Card>\r\n          <CardContent>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>\r\n                Name\r\n                  </TableCell>\r\n                  <TableCell>\r\n              Protein\r\n                  </TableCell>\r\n                  <TableCell>\r\n                Carbs\r\n                  </TableCell>\r\n                  <TableCell>\r\n                Fat\r\n                  </TableCell>\r\n                  <TableCell>\r\n                Actions\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {fooditemList.map(fooditem =>\r\n                  <TableRow key={fooditem.id}>\r\n                    <TableCell>{fooditem.name}</TableCell>\r\n                    <TableCell>{fooditem.protein}</TableCell>\r\n                    <TableCell>{fooditem.carbohydrate}</TableCell>\r\n                    <TableCell>{fooditem.fat}</TableCell>\r\n                    <TableCell><Button variant='outlined' onClick={() => handleDelete(fooditem.id)}><DeleteIcon /></Button></TableCell>\r\n                  </TableRow>\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default FooditemList","import { Alert  } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Notifications = () => {\r\n  const notification = useSelector(state => state.notification)\r\n  if(notification)\r\n    return (\r\n      <Alert\r\n        severity='warning'>{notification.messageText}</Alert>\r\n    )\r\n  else return null\r\n}\r\n\r\nexport default Notifications","export const setLoggedInUser = (userdata) => {\r\n  return {\r\n    type: 'SET_ACTIVE_USER',\r\n    //data: 'Test user'\r\n    data: userdata\r\n  }\r\n}\r\n\r\nexport const clearLoggedInUser = () => {\r\n  return {\r\n    type: 'CLEAR_ACTIVE_USER'\r\n  }\r\n}\r\n\r\nconst loggedInUserReducer = ( state = null, action) => {\r\n  switch (action.type){\r\n  case 'SET_ACTIVE_USER':\r\n    return action.data\r\n  case 'CLEAR_ACTIVE_USER':\r\n    return null\r\n  default:\r\n    return state\r\n  }\r\n\r\n}\r\n\r\nexport default loggedInUserReducer","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst loginUser = async (userdata) => {\r\n  //returns token or error\r\n  const response = await axios.post(baseUrl, userdata)\r\n  return response.data\r\n\r\n}\r\n\r\nconst loginService = {\r\n  loginUser\r\n}\r\n\r\nexport default loginService","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { AppBar, Toolbar, IconButton, Button, Menu, MenuItem, Tooltip, Popover, Alert } from '@mui/material'\r\nimport MenuIcon from '@mui/icons-material/Menu'\r\nimport AccountCircle from '@mui/icons-material/AccountCircle'\r\nimport { Typography } from '@mui/material'\r\nimport AdbIcon from '@mui/icons-material/Adb'\r\nimport { Box } from '@mui/material'\r\nimport { Link as RouterLink, MemoryRouter } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { TextField } from '@mui/material'\r\nimport loginService from '../services/login'\r\nimport { setLoggedInUser } from '../reducers/loggedInUserReducer'\r\nimport fooditemService from '../services/fooditem'\r\nimport recipeService from '../services/recipes'\r\n\r\nexport default function HeaderBar({ logout }) {\r\n\r\n  const [anchorElementUser, setAnchorElementUser] = useState(null)\r\n  const [anchorElementNavigation, setAnchorElementNavigation] = useState(null)\r\n  const [anchorElementLogin, setAnchorElementLogin] = useState(null)\r\n  const loggedInUser = useSelector(state => state.loggedInUser)\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [alert, setAlert] = useState(null)\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const handleUserMenu = (event) => {\r\n    console.log(event.currentTarget)\r\n    setAnchorElementUser(event.currentTarget)\r\n  }\r\n\r\n  const handleOpenNavigationMenu = (event) => {\r\n    setAnchorElementNavigation(event.currentTarget)\r\n  }\r\n\r\n  const handleOpenLoginMenu = (event) => {\r\n    setAnchorElementLogin(event.currentTarget)\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setAnchorElementUser(null)\r\n\r\n  }\r\n\r\n  const handleCloseLoginMenu = () => {\r\n    setAnchorElementLogin(null)\r\n    setUsername('')\r\n    setPassword('')\r\n  }\r\n\r\n  const handleCloseNavigationMenu = () => {\r\n    setAnchorElementNavigation(null)\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    logout()\r\n    setAnchorElementUser(null)\r\n  }\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n    console.log(username)\r\n    console.log(password)\r\n    // if successful login, handleCloseLoginMenu()\r\n\r\n\r\n    try {\r\n\r\n      const userdata = {\r\n        username,\r\n        password\r\n      }\r\n      const receivedTokenAndUserdata = await loginService.loginUser(userdata)\r\n      //Error thrown if unsuccessful login.\r\n\r\n      console.log('token', receivedTokenAndUserdata)\r\n      dispatch(setLoggedInUser(receivedTokenAndUserdata))\r\n      window.localStorage.setItem('MatappSavedLocalUser', JSON.stringify(receivedTokenAndUserdata))\r\n      fooditemService.setToken(receivedTokenAndUserdata.token)\r\n      recipeService.setToken(receivedTokenAndUserdata.token)\r\n      //Cleanup\r\n      handleCloseLoginMenu()\r\n\r\n    } catch (error) {\r\n      //Show error in login window\r\n      console.log(error.response.data.error)\r\n      setAlert(error.response.data.error)\r\n    }\r\n\r\n    console.log('submitted!')\r\n  }\r\n\r\n  const handleGuestLogin = async (event) => {\r\n    event.preventDefault()\r\n    try {\r\n\r\n      const userdata = {\r\n        username: 'guest',\r\n        password: 'guest'\r\n      }\r\n      const receivedTokenAndUserdata = await loginService.loginUser(userdata)\r\n      //Error thrown if unsuccessful login.\r\n\r\n      dispatch(setLoggedInUser(receivedTokenAndUserdata))\r\n      window.localStorage.setItem('MatappSavedLocalUser', JSON.stringify(receivedTokenAndUserdata))\r\n      fooditemService.setToken(receivedTokenAndUserdata.token)\r\n      recipeService.setToken(receivedTokenAndUserdata.token)\r\n      //Cleanup\r\n      handleCloseLoginMenu()\r\n\r\n    } catch (error) {\r\n      //Show error in login window\r\n      console.log(error.response.data.error)\r\n      setAlert(error.response.data.error)\r\n    }\r\n\r\n    console.log('submitted!')\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <AdbIcon sx={{ display: { xs: 'none', md: 'flex' }, mr: 1 }} />\r\n          <Typography\r\n            variant='h6'\r\n            noWrap\r\n            component='div'\r\n            sx={{\r\n              mr: 2,\r\n              display: { xs: 'none', md: 'flex' },\r\n              color: 'inherit'\r\n            }}\r\n          >\r\n            RECIPES\r\n          </Typography>\r\n          <Box sx={{ flexgrow: 1, display: { xs: 'flex', md: 'none' } }}>\r\n            <IconButton\r\n              size=\"medium\"\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              aria-label=\"menu\"\r\n              onClick={handleOpenNavigationMenu}\r\n              sx={{ mr: 2 }}\r\n            >\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id='menu-navigation'\r\n              anchorEl={anchorElementNavigation}\r\n              anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'left'\r\n              }}\r\n              keepMounted\r\n              transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'left'\r\n              }}\r\n              open={Boolean(anchorElementNavigation)}\r\n              onClose={handleCloseNavigationMenu}\r\n              sx={{\r\n                display: { xs: 'block', md: 'none' }\r\n              }}\r\n            >\r\n              <MenuItem onClick={handleCloseNavigationMenu}>\r\n                <Typography\r\n                  textAlign='center'\r\n                  component={RouterLink}\r\n                  to='/'\r\n                  color='inherit'\r\n                  textDecoration='none'\r\n                >\r\n                  Home\r\n                </Typography>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleCloseNavigationMenu}>\r\n                <Typography\r\n                  textAlign='center'\r\n                  component={RouterLink}\r\n                  to='/fooditems/'\r\n                  color='inherit'\r\n                  textDecoration='none'\r\n                >\r\n                  Fooditems\r\n                </Typography>\r\n              </MenuItem>\r\n            </Menu>\r\n          </Box>\r\n          <AdbIcon sx={{ display: { xs: 'flex', md: 'none' }, mr: 1 }} />\r\n          <Typography\r\n            variant='h6'\r\n            noWrap\r\n            component='div'\r\n            href='/'\r\n            sx={{\r\n              mr: 2,\r\n              display: { xs: 'flex', md: 'none' },\r\n              flexGrow: 1,\r\n              color: 'inherit',\r\n              textDecoration: 'none'\r\n            }}\r\n          >\r\n            RECIPES\r\n          </Typography>\r\n          <Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' } }}>\r\n            <Button\r\n              onClick={handleCloseNavigationMenu}\r\n              component={RouterLink}\r\n              to='/'\r\n              sx={{ my: 2, color: 'inherit', display: 'block' }}\r\n            >\r\n              Home\r\n            </Button>\r\n            <Button\r\n              onClick={handleCloseNavigationMenu}\r\n              component={RouterLink}\r\n              to='/fooditems/'\r\n              sx={{ my: 2, color: 'inherit', display: 'block' }}\r\n            >\r\n              Fooditems\r\n            </Button>\r\n          </Box>\r\n          <Box sx={{ flexGrow: 1 }} />\r\n\r\n          {loggedInUser ?\r\n            <Box sx={{ display: { xs: 'flex', md: 'flex' } }}>\r\n              <Typography\r\n                variant=\"subtitle1\"\r\n                noWrap\r\n                sx={{\r\n                  mr: 2,\r\n                  display: { xs: 'none', md: 'flex' },\r\n                  alignItems: 'center',\r\n                  color: 'inherit',\r\n                  textDecoration: 'none'\r\n                }}\r\n              >\r\n                {loggedInUser.username}\r\n              </Typography>\r\n              <Tooltip title=\"Open user menu\">\r\n                <IconButton\r\n                  size=\"large\"\r\n                  onClick={handleUserMenu}\r\n                  aria-label=\"test menu\"\r\n                  aria-controls=\"menu-appbar\"\r\n                  aria-haspopup=\"true\"\r\n                  color=\"inherit\"\r\n                >\r\n\r\n                  <AccountCircle />\r\n                </IconButton>\r\n              </Tooltip>\r\n              <Menu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorElementUser}\r\n                anchorOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right'\r\n                }}\r\n                transformOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                keepMounted\r\n                open={Boolean(anchorElementUser)}\r\n                onClose={handleClose}\r\n              >\r\n                <MenuItem onClick={handleLogout}>Logout</MenuItem>\r\n                <MenuItem onClick={handleClose}>Test2</MenuItem>\r\n              </Menu>\r\n            </Box> :\r\n            <Box>\r\n              <Button\r\n                variant=\"RouterLink\"\r\n                noWrap\r\n                //onClick={() => showLogin(true)}\r\n                onClick={handleOpenLoginMenu}\r\n                sx={{\r\n                  mr: 2,\r\n                  display: { xs: 'flex', md: 'flex' },\r\n                  alignItems: 'center',\r\n                  color: 'inherit',\r\n                  textDecoration: 'none'\r\n                }}>\r\n                Login\r\n              </Button>\r\n              <Popover\r\n                component=\"form\"\r\n                onSubmit={handleLogin}\r\n                id='login-menu'\r\n                open={Boolean(anchorElementLogin)}\r\n                anchorEl={anchorElementLogin}\r\n                onClose={handleCloseLoginMenu}\r\n                anchorOrigin={{\r\n                  vertical: 'bottom',\r\n                  horizontal: 'left',\r\n                }}\r\n              >\r\n                <Box\r\n                  sx={{\r\n                    alignContent: 'right'\r\n                  }}>\r\n                  <Typography\r\n                    variant='h6'\r\n                    sx={{\r\n                      color: 'inherit',\r\n                      p: 2,\r\n                    }}\r\n                  >\r\n                  Login\r\n                  </Typography>\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    px: 2,\r\n                    py: 1\r\n                  }}>\r\n                  <TextField fullWidth value={username} onChange={( event ) => setUsername(event.target.value)} controlId=\"formUsername\" id=\"username\" label=\"username\" variant=\"filled\" /><br />\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    px: 2,\r\n                    py: 1\r\n                  }}\r\n                >\r\n                  <TextField fullWidth value={password} onChange={( event ) => setPassword(event.target.value)} id=\"password\" label=\"password\" variant=\"filled\" type=\"password\" />\r\n                </Box>\r\n                {alert ? <Alert\r\n                  severity='warning'\r\n                  onClose={() => setAlert(null)}\r\n                >{alert}</Alert> :\r\n                  <></>\r\n                }\r\n                <Box\r\n                  sx={{\r\n                    p:2\r\n                  }}>\r\n\r\n                  <Button\r\n                    variant='contained'\r\n                    onClick={handleLogin}\r\n                    type='submit'\r\n                  >\r\n                  Login\r\n                  </Button>\r\n                  {' '}\r\n                  <Button\r\n                    onClick={handleCloseLoginMenu}\r\n                    variant='contained'\r\n                  >\r\n                  Close\r\n                  </Button>\r\n                  {' '}\r\n                  <Button\r\n                    variant='outlined'\r\n                    onClick={handleGuestLogin}\r\n                  >\r\n                  Login as guest\r\n                  </Button>\r\n\r\n                </Box>\r\n              </Popover>\r\n            </Box>\r\n          }\r\n\r\n\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  )\r\n}","/* eslint-disable no-unused-vars */\r\nimport React from 'react'\r\nimport FooditemForm from './components/FooditemForm'\r\nimport RecipeList from './components/RecipeList'\r\nimport Recipe from './components/Recipe'\r\nimport FooditemList from './components/FooditemList'\r\nimport Notifications from './components/Notifications'\r\nimport { useEffect } from 'react'\r\nimport recipeService from './services/recipes'\r\nimport fooditemService from './services/fooditem'\r\nimport { useDispatch } from 'react-redux'\r\nimport { initRecipes } from './reducers/recipeReducer'\r\nimport { initFooditems } from './reducers/fooditemReducer'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport { setLoggedInUser, clearLoggedInUser } from './reducers/loggedInUserReducer'\r\nimport { Grid } from '@mui/material'\r\nimport HeaderBar from './components/HeaderBar'\r\nimport { ThemeProvider } from '@mui/material'\r\nimport { createTheme } from '@mui/material'\r\n\r\nfunction App() {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n\r\n  const logout = () => {\r\n    console.log('logout!')\r\n    window.localStorage.removeItem('MatappSavedLocalUser')\r\n    dispatch(clearLoggedInUser())\r\n    fooditemService.setToken(null)\r\n    recipeService.setToken(null)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const savedUserJSON = window.localStorage.getItem('MatappSavedLocalUser')\r\n    if(savedUserJSON) {\r\n      const savedUser = JSON.parse(savedUserJSON)\r\n      dispatch(setLoggedInUser(savedUser))\r\n      recipeService.setToken(savedUser.token)\r\n      fooditemService.setToken(savedUser.token)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    recipeService\r\n      .getAll()\r\n      .then(response => {\r\n        dispatch(initRecipes(response.data))\r\n      })\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    fooditemService\r\n      .getAll()\r\n      .then(response => {\r\n        dispatch(initFooditems(response.data))\r\n      })\r\n  }, [dispatch])\r\n\r\n  const theme = createTheme({\r\n    palette: {\r\n      primary: {\r\n        light: '#4c8c4a',\r\n        main: '#1a8145',\r\n        dark: '#003300',\r\n        contrastText: '#ffffff'\r\n      },\r\n      secondary: {\r\n        light: '#8d4887',\r\n        main: '#5e1b5a',\r\n        dark: '#320030',\r\n        contrastText: '#ffffff'\r\n      },\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <ThemeProvider theme={theme}>\r\n        <HeaderBar logout={logout} />\r\n        <Notifications />\r\n        <Switch>\r\n          <Route path='/recipe/:id'>\r\n            <Grid container spacing={2} flexWrap='wrap' justifyContent='flex-start' >\r\n              <Recipe  />\r\n            </Grid>\r\n          </Route>\r\n          <Route path='/recipe/'>\r\n            <RecipeList />\r\n          </Route>\r\n          <Route path='/fooditems/'>\r\n            <div className='column'>\r\n              <FooditemList />\r\n              <FooditemForm />\r\n            </div>\r\n          </Route>\r\n          <Route path='/'>\r\n            <RecipeList />\r\n          </Route>\r\n        </Switch>\r\n      </ThemeProvider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport fooditemReducer from './reducers/fooditemReducer'\r\nimport recipeReducer from './reducers/recipeReducer'\r\nimport activeRecipeReducer from './reducers/activeRecipeReducer'\r\nimport loggedInUserReducer from './reducers/loggedInUserReducer'\r\nimport notificationReducer from './reducers/notificationReducer'\r\nimport timerReducer from './reducers/timerReducer'\r\n\r\nconst reducer = combineReducers({\r\n  fooditems: fooditemReducer,\r\n  recipes: recipeReducer,\r\n  activeRecipe: activeRecipeReducer,\r\n  loggedInUser: loggedInUserReducer,\r\n  notification: notificationReducer,\r\n  timer: timerReducer\r\n})\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  composeWithDevTools(applyMiddleware(thunk))\r\n)\r\n\r\nexport default store\r\n\r\n\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport { Provider } from 'react-redux'\r\nimport store from './store'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <Provider store={store} >\r\n      <App />\r\n    </Provider>\r\n  </Router>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}