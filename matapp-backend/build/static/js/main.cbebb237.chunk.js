(this["webpackJsonpmatapp-frontend"]=this["webpackJsonpmatapp-frontend"]||[]).push([[0],{201:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(45),c=n.n(r),o=n(12),i=n(19),s=n.n(i),l=n(26),u=n(271),d=n(272),j=n(274),b=n(275),f=n(249),O=n(263),p=n(278),x=n(22),h=n(34),m=n.n(h),g="/api/fooditems",v=null,E=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},console.log("config:",n),e.next=4,m.a.post(g,t,n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},console.log("config:",n),e.next=4,m.a.delete("".concat(g,"/").concat(t),n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={setToken:function(e){v="bearer ".concat(e),console.log("token set:",v)},getAll:function(){return console.log("getting all?"),m.a.get(g)},createFooditem:E,updateFooditem:function(e,t){return m.a.put("".concat(g,"/").concat(e),t)},deleteFooditem:I},y=function(e){return function(){var t=Object(l.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.createFooditem(e);case 3:return a=t.sent,console.log("DB created fooditem: ",a.data),t.next=7,n({type:"ADD_FOODITEM",data:a.data});case 7:return t.abrupt("return",null);case 10:return t.prev=10,t.t0=t.catch(0),console.log("testing",t.t0.response.data.error),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(l.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.deleteFooditem(e);case 3:return a=t.sent,console.log("Deleted:",a),t.next=7,n({type:"DELETE_FOODITEM",data:e});case 7:return t.abrupt("return",null);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_FOODITEMS":return t.data;case"ADD_FOODITEM":return e.concat(t.data);case"DELETE_FOODITEM":var n=e.filter((function(e){return e.id!==t.data}));return n;default:return e}},k=function(e){return{type:"SET_TIMER",data:{timeoutHandle:e}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TIMER":return window.clearTimeout(e),t.data.timeoutHandle;case"CLEAR_TIMER":return clearTimeout(e),null;default:return e}},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return console.log("creating notification!"),function(){var a=Object(l.a)(s.a.mark((function a(r){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r(D(e,t));case 2:return a.next=4,r(k(setTimeout((function(){r(A())}),n)));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},D=function(e,t){return{type:"SET_NOTIFICATION",data:{messageText:e,messageType:t}}},A=function(){return console.log("clearing!"),{type:"CLEAR_NOTIFICATION"}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return null;default:return e}},N=n(1),_=function(){var e=Object(x.b)(),t=function(){var t=Object(l.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),console.log("Adding food item",n.target.food.value),a={name:n.target.food.value,protein:n.target.protein.value,fat:n.target.fat.value,carbohydrate:n.target.carb.value},t.next=5,e(y(a));case 5:null!=(r=t.sent)&&e(S(r.response.data.error));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsx)(u.a,{item:!0,xl:4,lg:4,md:6,sm:8,xs:12,children:Object(N.jsx)(d.a,{variant:"outlined",children:Object(N.jsxs)(j.a,{children:[Object(N.jsx)(b.a,{variant:"h5",children:"Create fooditem"}),Object(N.jsx)("form",{onSubmit:t,children:Object(N.jsxs)(f.a,{direction:"column",spacing:1,children:[Object(N.jsx)(O.a,{name:"food",id:"food-name",variant:"outlined",label:"Food name"}),Object(N.jsx)(O.a,{name:"carb",type:"number",id:"carbs",variant:"outlined",label:"Carbohydrates (per 100g)"}),Object(N.jsx)(O.a,{name:"fat",type:"number",id:"fat",variant:"outlined",label:"Fat (per 100g)"}),Object(N.jsx)(O.a,{name:"protein",type:"number",id:"protein",variant:"outlined",label:"Protein (per 100g)"}),Object(N.jsx)(p.a,{variant:"contained",type:"submit",children:"Create"})]})})]})})})},U=n(10),L=n(277),P=n(264),M=n(267),z=n(268),W=function(e){return{type:"SET_RECIPE",data:e}},G=function(e,t){return{type:"UPDATE_INGREDIENT_AMOUNT",data:{ingredientId:e,newAmount:t}}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RECIPE":return t.data;case"ADD_INGREDIENT":var n=t.data,a=e.ingredients.concat(n);return Object(U.a)(Object(U.a)({},e),{},{ingredients:a});case"UPDATE_INGREDIENT_AMOUNT":var r=e.ingredients.find((function(e){return e.id===t.data.ingredientId})),c=Object(U.a)(Object(U.a)({},r),{},{amount:t.data.newAmount}),o=e.ingredients.map((function(e){return e.id!==c.id?e:c}));return Object(U.a)(Object(U.a)({},e),{},{ingredients:o});case"DELETE_INGREDIENT":var i=e.ingredients.filter((function(e){return e.id!==t.data.ingredientId}));return Object(U.a)(Object(U.a)({},e),{},{ingredients:i});default:return e}},B=function(){var e=Object(x.c)((function(e){return e.fooditems})),t=Object(x.b)(),n=Object(a.useState)(null),r=Object(o.a)(n,2),c=r[0],i=r[1],s=(e.map((function(e){return{value:e.id,label:e.name}})),e.map((function(e){return{label:e.name,id:e.id}})));return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(u.a,{item:!0,xl:4,lg:4,md:6,sm:8,xs:12,children:Object(N.jsx)(d.a,{variant:"outlined",children:Object(N.jsxs)(j.a,{children:[Object(N.jsx)(b.a,{variant:"h5",children:"Add Ingredient"}),Object(N.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),e.target.fooditem.value){console.log("fooditem",c),console.log("amount",e.target.amount.value),console.log("amountUnit",e.target.amountUnit.value);var n,a={fooditemId:c.id,amount:e.target.amount.value,amountUnit:e.target.amountUnit.value};e.target.amount.value="",e.target.amountUnit.value="g",console.log("new ingredient",a),t((n=a,console.log("Ingredient: ",n),{type:"ADD_INGREDIENT",data:Object(U.a)(Object(U.a)({},n),{},{id:Math.floor(1e4*Math.random())})}))}else window.alert("Please select a food from the menu")},children:Object(N.jsxs)(L.a,{children:[Object(N.jsx)(P.a,{disablePortal:!0,id:"fooditemAutocomplete",options:s,onChange:function(e,t){return i(t)},renderInput:function(e){return Object(N.jsx)(O.a,Object(U.a)(Object(U.a)({},e),{},{name:"fooditem"}))}}),Object(N.jsx)(O.a,{id:"amount",label:"amount",type:"number"}),Object(N.jsxs)(M.a,{name:"amountUnit",children:[Object(N.jsx)(z.a,{value:"g",children:"gram (g)"}),Object(N.jsx)(z.a,{value:"ml",children:"milliliter (ml)"}),Object(N.jsx)(z.a,{value:"tbsp",children:"tablespoon (tbsp)"}),Object(N.jsx)(z.a,{value:"tsp",children:"teaspoon (tsp)"})]}),Object(N.jsx)(p.a,{type:"submit",variant:"contained",children:"Add"})]})})]})})})})},H=n(17),V=n(24),X="/api/recipes",Y=null,q={getAll:function(){return m.a.get(X)},getRecipe:function(e){return console.log("getting local recipe"),m.a.get("".concat(X,"/").concat(e))},createRecipe:function(e){var t={headers:{Authorization:Y}};return m.a.post(X,e,t)},updateRecipe:function(e){var t={headers:{Authorization:Y}};return m.a.put("".concat(X,"/").concat(e.id),e,t)},deleteRecipe:function(e){var t={headers:{Authorization:Y}};return m.a.delete("".concat(X,"/").concat(e.id),t)},setToken:function(e){Y="bearer ".concat(e),console.log("token set:",Y)},addIngredientToRecipe:function(e,t){var n={headers:{Authorization:Y}};return m.a.post("".concat(X,"/").concat(e.id,"/ingredients"),t,n)},updateIngredientInRecipe:function(e,t){var n={headers:{Authorization:Y}};return m.a.put("".concat(X,"/").concat(e.id,"/ingredients/").concat(t.id),t,n)},deleteIngredientFromRecipe:function(e,t){console.log("we deleting now boys!");var n={headers:{Authorization:Y}};return m.a.delete("".concat(X,"/").concat(e.id,"/ingredients/").concat(t),n)},updateAllIngredients:function(e,t){var n={headers:{Authorization:Y}};return m.a.put("".concat(X,"/").concat(e.id,"/ingredients"),t,n)}},K=function(e){return{type:"ADD_RECIPE",data:e}},Q=function(e){return{type:"DELETE_RECIPE",data:e}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_RECIPES":return t.data;case"ADD_RECIPE":return e.concat(t.data);case"UPDATE_RECIPE":var n=e.find((function(e){return e.id===t.data.id}));return console.log("Updated recipe ",n),e.map((function(e){return e.id!==t.data.id?e:t.data}));case"DELETE_RECIPE":var a=e.filter((function(e){return e.id!==t.data.id}));return a;default:return e}},$=n(259),ee=n(280),te=n(281),ne=n(282),ae=n(279),re=n(70),ce=n.n(re),oe=function(e){var t=e.recipe,n=e.handleCloneRecipe,r=e.handleShowRecipe,c=e.handleDeleteRecipe,i=Object(a.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(N.jsxs)(ee.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(N.jsx)(te.a,{component:"th",scope:"row",children:t.title}),Object(N.jsx)(te.a,{children:t.date}),Object(N.jsx)(te.a,{align:"right",size:"small",children:Object(N.jsxs)(ne.a,{children:[Object(N.jsx)(p.a,{variant:"contained",onClick:function(){return n(t)},children:"Copy"}),t.template?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{variant:"outlined",children:"Edit"}),Object(N.jsx)(ae.a,{"aria-label":"delete",disabled:!0,children:Object(N.jsx)(ce.a,{})})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{variant:"contained",onClick:function(){return r(t)},children:"Edit"}),Object(N.jsx)(ae.a,{"aria-label":"delete",color:"primary",onClick:function(){return u(!0)},children:Object(N.jsx)(ce.a,{})})]})]})}),Object(N.jsx)("br",{}),l?Object(N.jsxs)($.a,{variant:"danger",children:["Really delete?",Object(N.jsx)("button",{onClick:function(){return c(t)},children:"Yes"}),Object(N.jsx)("button",{onClick:function(){return u(!1)},children:"No"})," "]}):Object(N.jsx)(N.Fragment,{})]},t.id)},ie=n(283),se=n(284),le=n(285),ue=n(286),de=n(273),je=["id"],be=function(){var e=Object(x.c)((function(e){return e.recipes})),t=Object(x.b)(),n=Object(V.f)(),a=function(e){console.log("handled show recipe"),t(W(e)),n.push("/recipe/".concat(e.id))},r=function(){var e=Object(l.a)(s.a.mark((function e(a){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.id,r=Object(H.a)(a,je),console.log("WithoutID?",r),r=Object(U.a)(Object(U.a)({},r),{},{template:!1}),(new Date).toLocaleDateString("no-no"),console.log(r.name),e.prev=5,e.next=8,q.createRecipe(r);case 8:c=e.sent,t(K(c.data)),n.push("/recipe/".concat(c.data.id)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log("Failed to clone recipe");case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(l.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete clicked for recipe: ",n.id),e.prev=1,e.next=4,q.deleteRecipe(n);case 4:a=e.sent,console.log("deleted recipe",a),t(Q(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Failed to delete recipe");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(ie.a,{component:de.a,children:Object(N.jsxs)(se.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(N.jsx)(le.a,{children:Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"Name"}),Object(N.jsx)(te.a,{children:"Date created"})]})}),Object(N.jsx)(ue.a,{children:e.map((function(e){return Object(N.jsx)(oe,{recipe:e,handleCloneRecipe:r,handleShowRecipe:a,handleDeleteRecipe:c},e.id)}))})]})})},fe={caloriesIn:function(e){return(9*e.fooditem.fat+4*e.fooditem.protein+4*e.fooditem.carbohydrate)*e.amount/100},calcTotalCalOf:function(e){return e.reduce((function(e,t){return e+fe.caloriesIn(t)}),0)},calcTotalCarbsOf:function(e){return e.reduce((function(e,t){return e+t.fooditem.carbohydrate*t.amount/100}),0)},calcTotalFatOf:function(e){return e.reduce((function(e,t){return e+t.fooditem.fat*t.amount/100}),0)},calcTotalProteinOf:function(e){return e.reduce((function(e,t){return e+t.fooditem.protein*t.amount/100}),0)}},Oe=fe,pe=n(269),xe=n(287),he=n(288),me=n(289),ge=n(265),ve=function(e){var t=e.ingredient,n=(e.updateAmount,Object(x.b)()),r=Object(a.useState)(t.amount),c=Object(o.a)(r,2),i=(c[0],c[1]),s=Object(a.useState)(t.amount),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(t.amount-50<0?0:t.amount-50),O=Object(o.a)(j,2),h=O[0],m=O[1],g=Object(a.useState)(Number(t.amount)+50),v=Object(o.a)(g,2),E=v[0],I=v[1];return Object(N.jsxs)(pe.a,{children:[Object(N.jsx)(xe.a,{children:Object(N.jsxs)(f.a,{direction:"row",flexGrow:1,justifyContent:"space-between",children:[Object(N.jsx)(b.a,{sx:{display:"inline-flex"},children:t.fooditem.name}),Object(N.jsxs)(b.a,{sx:{display:"flex",color:"text.secondary"},children:[t.amount," ",t.amountUnit]})]})}),Object(N.jsx)(he.a,{children:Object(N.jsx)(me.a,{sx:{ml:2},children:Object(N.jsxs)(f.a,{direction:"row",justifyContent:"space-between",spacing:3,children:[Object(N.jsx)(ge.a,{marks:[{value:h,label:"".concat(h," ").concat(t.amountUnit)},{value:E,label:"".concat(E," ").concat(t.amountUnit)}],min:h,max:E,value:u,onChange:function(e){i(e.target.value),d(e.target.value),e.target.value===h?(m(e.target.value-10<0?0:e.target.value-10),I(h+100)):e.target.value===E&&(I(E+10),m(h+10)),n(G(t.id,e.target.value))}}),Object(N.jsx)(p.a,{variant:"outlined",onClick:function(){console.log("attempt to delete ingredient",t),n({type:"DELETE_INGREDIENT",data:{ingredientId:t.id}})},children:Object(N.jsx)(ce.a,{})})]})})})]})},Ee=n(250),Ie=n(148),we=n.n(Ie),ye=n(147),Te=n.n(ye),Ce=function(){var e=Object(x.c)((function(e){return e.activeRecipe})),t=Object(x.c)((function(e){return e.fooditems})),n=Object(x.b)(),r=Object(V.f)(),c=Object(a.useState)(1),i=Object(o.a)(c,2),O=i[0],h=i[1],m=null,g=Object(V.g)().id;if(Object(a.useEffect)((function(){var e=window.localStorage.getItem("savedRecipe".concat(g));if(e){console.log("found save:",JSON.parse(e));var t=JSON.parse(e);console.log(t),n(W(t.activeRecipe))}else q.getRecipe(g).then((function(e){n(W(e.data))}))}),[]),!e)return Object(N.jsx)("p",{children:"Waiting for activeRecipe to be set"});if(0===t.length)return Object(N.jsx)("p",{children:"Waiting for foodItems"});console.log("Fooditems currently: ",t),m||(m=e.ingredients.map((function(e){var n=t.find((function(t){return t.id===e.fooditemId}));return void 0===n?(console.log("Fooditem in recipe not found in fooditem list"),{fooditem:{name:"<Deleted fooditem>",protein:0,fat:0,carbohydrate:0,id:0},amount:0,amountUnit:"g",id:e.id}):(console.log("found fooditem",n),e.fooditem=n,e)}))),console.log("ingredients:",m);var v=function(e,t){console.log("Want to save these changes: ",e,t)},E=function(){var t={activeRecipe:e,ingredients:m};console.log("saving following ingredients:",m),window.localStorage.setItem("savedRecipe".concat(g),JSON.stringify(t))},I=function(){var t=Object(l.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.next=3,q.updateAllIngredients(e,m);case 3:a=t.sent,console.log("response return data",a.data),n(W(a.data));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(u.a,{item:!0,xs:12,children:[Object(N.jsx)(b.a,{variant:"h4",sx:{m:2},children:e.title}),Object(N.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(N.jsx)(p.a,{variant:"contained",startIcon:Object(N.jsx)(Te.a,{}),onClick:I,children:"Server"}),Object(N.jsx)(p.a,{variant:"outlined",startIcon:Object(N.jsx)(we.a,{}),onClick:E,children:"Local"}),Object(N.jsx)(p.a,{variant:"outlined",startIcon:Object(N.jsx)(ce.a,{}),onClick:function(){window.localStorage.removeItem("savedRecipe".concat(g)),r.push("/")},children:"Discard changes"})]})]}),Object(N.jsx)(u.a,{item:!0,xl:4,lg:4,md:6,sm:8,xs:12,children:Object(N.jsxs)(d.a,{variant:"outlined",sx:{gridRow:"1",gridColumn:"span 2"},children:[Object(N.jsx)(j.a,{children:Object(N.jsx)(b.a,{variant:"h5",children:"Ingredients"})}),Object(N.jsx)(j.a,{children:m.map((function(e){return Object(N.jsx)(ve,{ingredient:e,updateAmount:v},e.id)}))})]})}),Object(N.jsx)(B,{}),Object(N.jsx)(u.a,{item:!0,xl:4,lg:4,md:6,sm:8,xs:12,children:Object(N.jsx)(d.a,{variant:"outlined",sx:{},children:Object(N.jsxs)(j.a,{children:[Object(N.jsx)(b.a,{variant:"h5",children:"Nutritional information"}),Object(N.jsxs)(se.a,{children:[Object(N.jsx)(le.a,{children:Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"X"}),Object(N.jsx)(te.a,{children:"Total"}),Object(N.jsx)(te.a,{children:"Per serving"})]})}),Object(N.jsxs)(ue.a,{children:[Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"Calories"}),Object(N.jsx)(te.a,{children:Oe.calcTotalCalOf(m)}),Object(N.jsxs)(te.a,{children:[(Oe.calcTotalCalOf(m)/O).toFixed(0)," kcal"]})]}),Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"Carbs"}),Object(N.jsx)(te.a,{children:Oe.calcTotalCarbsOf(m)}),Object(N.jsxs)(te.a,{children:[(Oe.calcTotalCarbsOf(m)/O).toFixed(0)," g"]})]}),Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"Fat"}),Object(N.jsx)(te.a,{children:Oe.calcTotalFatOf(m)}),Object(N.jsxs)(te.a,{children:[(Oe.calcTotalFatOf(m)/O).toFixed(0)," g"]})]}),Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"Protein"}),Object(N.jsxs)(te.a,{children:[Oe.calcTotalProteinOf(m)," g"]}),Object(N.jsxs)(te.a,{children:[(Oe.calcTotalProteinOf(m)/O).toFixed(0)," g"]})]})]})]}),Object(N.jsxs)(b.a,{variant:"body1",children:["Number of servings: "," ",Object(N.jsx)(Ee.a,{value:O,onChange:function(e){return h(e.target.value)},inputProps:{step:1,min:1,max:100,type:"number"},sx:{maxWidth:42}})]})]})})})]})},ke=n(149),Re=n.n(ke),Se=function(){var e=Object(x.c)((function(e){return e.fooditems})),t=Object(x.b)(),n=function(){var e=Object(l.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(T(n));case 2:(a=e.sent)?(console.log("received error: ",a.response.data.error),t(S(a.message+" - "+a.response.data.error,"error"))):console.log("retrnvalue null, success!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(u.a,{container:!0,spacing:2,flexWrap:"wrap",justifyContent:"flex-start",children:Object(N.jsxs)(u.a,{item:!0,xl:6,lg:8,md:10,sm:12,children:[Object(N.jsx)(b.a,{variant:"h4",sx:{m:2},children:"Fooditems"}),Object(N.jsx)(d.a,{children:Object(N.jsx)(j.a,{children:Object(N.jsxs)(se.a,{children:[Object(N.jsx)(le.a,{children:Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:"Name"}),Object(N.jsx)(te.a,{children:"Protein"}),Object(N.jsx)(te.a,{children:"Carbs"}),Object(N.jsx)(te.a,{children:"Fat"}),Object(N.jsx)(te.a,{children:"Actions"})]})}),Object(N.jsx)(ue.a,{children:e.map((function(e){return Object(N.jsxs)(ee.a,{children:[Object(N.jsx)(te.a,{children:e.name}),Object(N.jsx)(te.a,{children:e.protein}),Object(N.jsx)(te.a,{children:e.carbohydrate}),Object(N.jsx)(te.a,{children:e.fat}),Object(N.jsx)(te.a,{children:Object(N.jsx)(p.a,{variant:"outlined",onClick:function(){return n(e.id)},children:Object(N.jsx)(Re.a,{})})})]},e.id)}))})]})})})]})})},De=n(260),Ae=n(257),Fe=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne={loginUser:Fe},_e=function(e){return{type:"SET_ACTIVE_USER",data:e}},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_USER":return t.data;case"CLEAR_ACTIVE_USER":return null;default:return e}},Le=function(e){var t=e.hideLoginField,n=Object(x.b)(),a=function(){var e=Object(l.a)(s.a.mark((function e(a){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,console.log("user",a.target.formUsername.value),console.log("pw",a.target.formPassword.value),r={username:a.target.formUsername.value,password:a.target.formPassword.value},e.next=7,Ne.loginUser(r);case 7:c=e.sent,console.log("token",c),n(_e(c)),window.localStorage.setItem("MatappSavedLocalUser",JSON.stringify(c)),w.setToken(c.token),q.setToken(c.token),t(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:console.log("submitted!");case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(De.a,{onSubmit:a,children:[Object(N.jsxs)(De.a.Group,{className:"mb-3",controlId:"formUsername",children:[Object(N.jsx)(De.a.Label,{children:"Username"}),Object(N.jsx)(De.a.Control,{type:"text",placeholder:"enter username"})]}),Object(N.jsxs)(De.a.Group,{className:"mb-3",controlId:"formPassword",children:[Object(N.jsx)(De.a.Label,{children:"Password"}),Object(N.jsx)(De.a.Control,{type:"password",placeholder:"password"})]}),Object(N.jsx)(Ae.a,{variant:"primary",type:"submit",children:"login"})]})},Pe=n(266),Me=function(){var e=Object(x.c)((function(e){return e.notification}));return e?Object(N.jsx)(Pe.a,{severity:"warning",children:e.messageText}):null},ze=n(290),We=n(291),Ge=n(153),Je=n(292),Be=n(261),He=n(120),Ve=n.n(He),Xe=n(121),Ye=n.n(Xe),qe=n(125),Ke=n.n(qe),Qe=n(63);function Ze(e){var t=e.logout,n=(e.showLogin,Object(a.useState)(null)),r=Object(o.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)(null),d=Object(o.a)(u,2),j=d[0],f=d[1],h=Object(a.useState)(null),m=Object(o.a)(h,2),g=m[0],v=m[1],E=Object(x.c)((function(e){return e.loggedInUser})),I=Object(a.useState)(""),y=Object(o.a)(I,2),T=y[0],C=y[1],k=Object(a.useState)(""),R=Object(o.a)(k,2),S=R[0],D=R[1],A=Object(x.b)(),F=function(){i(null)},_=function(){v(null),C(""),D("")},U=function(){f(null)},L=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(T),console.log(S),e.prev=3,n={username:T,password:S},e.next=7,Ne.loginUser(n);case 7:a=e.sent,console.log("token",a),A(_e(a)),window.localStorage.setItem("MatappSavedLocalUser",JSON.stringify(a)),w.setToken(a.token),q.setToken(a.token),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:console.log("submitted!");case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{children:Object(N.jsx)(ze.a,{position:"static",children:Object(N.jsxs)(We.a,{children:[Object(N.jsx)(Ke.a,{sx:{display:{xs:"none",md:"flex"},mr:1}}),Object(N.jsx)(b.a,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"},color:"inherit"},children:"RECIPES"}),Object(N.jsxs)(me.a,{sx:{flexgrow:1,display:{xs:"flex",md:"none"}},children:[Object(N.jsx)(ae.a,{size:"medium",edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){f(e.currentTarget)},sx:{mr:2},children:Object(N.jsx)(Ve.a,{})}),Object(N.jsxs)(Ge.a,{id:"menu-navigation",anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(j),onClose:U,sx:{display:{xs:"block",md:"none"}},children:[Object(N.jsx)(z.a,{onClick:U,children:Object(N.jsx)(b.a,{textAlign:"center",component:Qe.b,to:"/",color:"inherit",textDecoration:"none",children:"Home"})}),Object(N.jsx)(z.a,{onClick:U,children:Object(N.jsx)(b.a,{textAlign:"center",component:Qe.b,to:"/fooditems/",color:"inherit",textDecoration:"none",children:"Fooditems"})})]})]}),Object(N.jsx)(Ke.a,{sx:{display:{xs:"flex",md:"none"},mr:1}}),Object(N.jsx)(b.a,{variant:"h6",noWrap:!0,component:"div",href:"/",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,color:"inherit",textDecoration:"none"},children:"RECIPES"}),Object(N.jsxs)(me.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:[Object(N.jsx)(p.a,{onClick:U,component:Qe.b,to:"/",sx:{my:2,color:"inherit",display:"block"},children:"Home"}),Object(N.jsx)(p.a,{onClick:U,component:Qe.b,to:"/fooditems/",sx:{my:2,color:"inherit",display:"block"},children:"Fooditems"})]}),Object(N.jsx)(me.a,{sx:{flexGrow:1}}),E?Object(N.jsxs)(me.a,{sx:{display:{xs:"flex",md:"flex"}},children:[Object(N.jsx)(b.a,{variant:"subtitle1",noWrap:!0,sx:{mr:2,display:{xs:"none",md:"flex"},alignItems:"center",color:"inherit",textDecoration:"none"},children:E.username}),Object(N.jsx)(Je.a,{title:"Open user menu",children:Object(N.jsx)(ae.a,{size:"large",onClick:function(e){console.log(e.currentTarget),i(e.currentTarget)},"aria-label":"test menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",children:Object(N.jsx)(Ye.a,{})})}),Object(N.jsxs)(Ge.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,open:Boolean(c),onClose:F,children:[Object(N.jsx)(z.a,{onClick:function(){t(),i(null)},children:"Logout"}),Object(N.jsx)(z.a,{onClick:F,children:"Test2"})]})]}):Object(N.jsxs)(me.a,{children:[Object(N.jsx)(p.a,{variant:"RouterLink",noWrap:!0,onClick:function(e){v(e.currentTarget)},sx:{mr:2,display:{xs:"none",md:"flex"},alignItems:"center",color:"inherit",textDecoration:"none"},children:"Login"}),Object(N.jsxs)(Be.a,{component:"form",onSubmit:L,id:"login-menu",open:Boolean(g),anchorEl:g,onClose:_,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(N.jsx)(me.a,{sx:{alignContent:"right"},children:Object(N.jsx)(b.a,{variant:"h6",sx:{color:"inherit",p:2},children:"Login"})}),Object(N.jsxs)(me.a,{sx:{px:2,py:1},children:[Object(N.jsx)(O.a,{value:T,onChange:function(e){return C(e.target.value)},controlId:"formUsername",id:"username",label:"username",variant:"filled"}),Object(N.jsx)("br",{})]}),Object(N.jsx)(me.a,{sx:{px:2,py:1},children:Object(N.jsx)(O.a,{value:S,onChange:function(e){return D(e.target.value)},id:"password",label:"password",variant:"filled",type:"password"})}),Object(N.jsxs)(me.a,{sx:{p:2},children:[Object(N.jsx)(p.a,{onClick:_,variant:"contained",children:"Close"})," ",Object(N.jsx)(p.a,{variant:"contained",onClick:L,type:"submit",children:"Login"})]})]})]})]})})})}var $e=n(270),et=n(152);var tt=function(){Object(x.c)((function(e){return e.fooditems})),Object(x.c)((function(e){return e.activeRecipe})),Object(x.c)((function(e){return e.loggedInUser}));var e=Object(x.b)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){var t=window.localStorage.getItem("MatappSavedLocalUser");if(t){var n=JSON.parse(t);e(_e(n)),q.setToken(n.token),w.setToken(n.token)}}),[]),Object(a.useEffect)((function(){q.getAll().then((function(t){e({type:"INIT_RECIPES",data:t.data})}))}),[e]),Object(a.useEffect)((function(){w.getAll().then((function(t){e({type:"INIT_FOODITEMS",data:t.data})}))}),[e]);var i=Object(et.a)({palette:{primary:{light:"#4c8c4a",main:"#1a8145",dark:"#003300",contrastText:"#ffffff"},secondary:{light:"#8d4887",main:"#5e1b5a",dark:"#320030",contrastText:"#ffffff"}}});return Object(N.jsx)("div",{children:Object(N.jsxs)($e.a,{theme:i,children:[Object(N.jsx)(Ze,{logout:function(){console.log("logout!"),window.localStorage.removeItem("MatappSavedLocalUser"),e({type:"CLEAR_ACTIVE_USER"}),w.setToken(null),q.setToken(null)},showLogin:c}),Object(N.jsx)(Me,{}),r?Object(N.jsx)(Le,{hideLoginField:function(){return c(!1)}}):Object(N.jsx)(N.Fragment,{}),Object(N.jsxs)(V.c,{children:[Object(N.jsx)(V.a,{path:"/recipe/:id",children:Object(N.jsxs)(u.a,{container:!0,spacing:2,flexWrap:"wrap",justifyContent:"flex-start",children:[Object(N.jsx)(Ce,{}),Object(N.jsx)(_,{})]})}),Object(N.jsx)(V.a,{path:"/recipe/",children:Object(N.jsx)(be,{})}),Object(N.jsx)(V.a,{path:"/fooditems/",children:Object(N.jsxs)("div",{className:"column",children:[Object(N.jsx)(Se,{}),Object(N.jsx)(_,{})]})}),Object(N.jsx)(V.a,{path:"/",children:Object(N.jsx)(be,{})})]})]})})},nt=n(85),at=n(150),rt=n(151),ct=Object(nt.combineReducers)({fooditems:C,recipes:Z,activeRecipe:J,loggedInUser:Ue,notification:F,timer:R}),ot=Object(nt.createStore)(ct,Object(at.composeWithDevTools)(Object(nt.applyMiddleware)(rt.a)));c.a.render(Object(N.jsx)(Qe.a,{children:Object(N.jsx)(x.a,{store:ot,children:Object(N.jsx)(tt,{})})}),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.cbebb237.chunk.js.map